<h6 _ngcontent-c2="" class="text-uppercase">
  data sources
  <small _ngcontent-c2="" class="text-muted">add a data source</small>
</h6>

<form [formGroup]="dsForm" (ngSubmit)="onSubmit()">
  <div class="form-group label-small">
    <label for="type">TYPE</label>
    <select class="form-control" formControlName="type" name="type" required>
      <option *ngFor="let type of datasourceTypes" [value]="type">{{type}}</option>
    </select>
    <div [hidden]="dsForm.get('type').valid || dsForm.get('type').pristine" class="alert alert-danger">
        Type is required
    </div>
  </div>

  <div [ngSwitch]="dsForm.get('type').value">

    <div *ngSwitchCase="'OPC-DA'" id="opc-da-form">
      <div class="form-group label-small">
        <label for="name">NAME</label>
        <input type="text" class="form-control" formControlName="name" name="name">
        <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
              Name is required
        </div>
      </div>

      <div class="form-group label-small">
        <label for="name">DESCRIPTION</label>
        <input type="text" class="form-control" formControlName="description" name="description">
        <div [hidden]="dsForm.get('description').valid || dsForm.get('description').pristine" class="alert alert-danger">
            Description is required
        </div>
      </div>

      <div class="form-group label-small">
        <label for="hostAndPort">HOST &amp; PORT</label>
        <input type="text" class="form-control" formControlName="host" name="hostAndPort">
        <div [hidden]="dsForm.get('host').valid || dsForm.get('host').pristine" class="alert alert-danger">
            Host is required
        </div>
      </div>

      <div class="form-group label-small">
        <label for="clsid">CLSID</label>
        <input type="text" class="form-control" formControlName="clsid" name="clsid">
      </div>

      <div class="form-group label-small">
        <label for="progId">ProgID</label>
        <input type="text" class="form-control" formControlName="progId" name="progId">
      </div>

      <div formGroupName="auth" class="mt-3">
          <h6 _ngcontent-c2="" class="text-uppercase">
            AUTHENTIFICATION
            <small _ngcontent-c2="" class="text-muted">credentials</small>
          </h6>
          <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" value="none" name="cred" formControlName="cred" id="withoutCred" class="custom-control-input">
            <label class="custom-control-label text-uppercase" for="withoutCred">none</label>
          </div>
          <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" value="normal" name="cred" formControlName="cred" id="withCred" class="custom-control-input">
            <label class="custom-control-label text-uppercase" for="withCred">CREDENTIALS</label>
          </div>


        <div *ngIf="dsForm.get('auth.cred').value !== 'none'">
          <div class="form-group label-small">
            <label for="user">USER</label>
            <input type="text" class="form-control" formControlName="user" name="user">
          </div>
          <div [hidden]="dsForm.get('auth.user').valid || dsForm.get('auth.user').pristine" class="alert alert-danger">
              User is required
          </div>

          <div class="form-group label-small">
            <label for="pwd">PASSWORD</label>
            <input type="text" class="form-control" formControlName="password" name="password">
          </div>
          <div [hidden]="dsForm.get('auth.password').valid || dsForm.get('auth.password').pristine" class="alert alert-danger">
              Password is required
          </div>
        </div>
      </div>
    </div>

    <div *ngSwitchCase="'FAKE'">TODO</div>

    <div *ngSwitchDefault>Please choose a type</div>

  </div>

  <button type="button" (click)="revert()" class="btn btn-danger btn-md btn-block text-uppercase" [disabled]="!dsForm.valid">Cancel</button>

  <button type="submit" class="btn btn-success btn-md btn-block text-uppercase" [disabled]="!dsForm.valid">{{submitBtnMsg}}</button>

  <div *ngIf="datasourceIsReachable$">{{ (datasourceIsReachable$ | async) ? "Datasource is reachable" : "Can not reach datasource"}}</div>

</form>
