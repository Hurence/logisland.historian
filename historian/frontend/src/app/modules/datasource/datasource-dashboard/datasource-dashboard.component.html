<div class="container-fluid no-padding h-100">
  <div class="row no-gutters h-100">
    <!-- <div class="col-lg-12 col-md-12 bg-dark h-10 small-column">
      <div class="row no-gutters h-100">
          <div class="col-lg-12 col-md-12 datasource-dashboard-title text-center h-100">
            <h1>Datasources</h1>
          </div>
      </div>
    </div> -->
    <section class="content-header">
      <h1>
          Datasources &amp; Tags
        <small></small>
      </h1>
    </section>
    <div class="col-lg-12 col-md-12">
      <div class="row content no-gutters h-100">
        <div class="col-lg-4 col-md-4 col-sm-12 left-panel sticky-top">
          <div class="row mt-0 h-100 no-gutters">
            <div class="col-lg-12 col-md-12 small-column no-padding no-margin">
              <div class="align-top">
                  <app-search [placeHolder]="filterPlaceHolder" (queryString)="onFilterQuery($event)"></app-search>
              </div>
            </div>
            <div class="col-lg-12 col-md-12 small-column">
              <button type="button" class="float-right ui-button-text ui-button ui-widget ui-state-default ui-corner-all" (click)="onClickAddDatasource()">
                <i class="fa fa-plus" aria-hidden="true"></i>Add new datasource
              </button>
            </div>
            <div class="col-lg-12 col-md-12 large-column">
              <app-datasources-list [selectedDatasource]="selectedDatasource" (selectedDatasourceE)="onSelectDatasource($event)"></app-datasources-list>
            </div>
          </div>
        </div>
        <div class="col-lg-8 col-md-8 col-sm-12 rigth-panel h-100">
          <!-- <div class="datasource-detail-title text-center h-10 align-bottom small-column">
            <h2>Datasource Detail</h2>
          </div> -->
          <div class="row">
            <div class="col-12 small-column">
              <button type="button" class="float-right ui-button-text ui-button ui-widget ui-state-default ui-corner-all" 
                      (click)="onClickAddTag()" [disabled]="isAddTagDisabled(selectedDatasource)">
                <i class="fa fa-plus" aria-hidden="true"></i>Add new tag
              </button>
            </div>
            <div class="col-12 datasource-detail-content h-100">
              <app-opc-tag-tree [tags]="tags"></app-opc-tag-tree>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- tag form add new tag -->
<!-- <div *ngIf="datasource !== null"> -->
<p-dialog [(visible)]="disaplyAddTagForm" [modal]="true">
  <p-header>
      Add tag to datasource : '{{selectedDatasource?.id}}'
  </p-header>
  <app-add-tag-form [questions]="tagQuestions" [item]="createdTag" (submitted)="onTagCreated($event)"></app-add-tag-form>
  <p-footer>
  </p-footer>
</p-dialog>
<p-dialog [(visible)]="displayAddDatasource" [modal]="true" appendTo="body" [dismissableMask]="true">
  <p-header>
      Add a new datasource
  </p-header>
  <app-datasource-form [datasource]="datasourceToCreate" [isCreation]="true" (submitted)="onSubmitted($event)"></app-datasource-form>
  <p-footer>
  </p-footer>
</p-dialog>
<!-- </div> -->