<div class="ui-g">
  <!-- MENU FOR VIEW -->
  <div class='ui-g-12'>
    <app-visualization-menu 
    [timeRange]="timeRange" 
    (timeRangeChange)="onTimeRangeChanged($event)"
    [autoRefreshInterval]="autoRefreshInterval" 
    (autoRefreshIntervalChange)="onAutoRefreshIntervalChanged($event)"
    [tagSelection]="currentTagsSelection"
    (tagSelectionChange)="onSelectionChanged($event)"
    [view]="view"
    (viewChange)="onViewChanged($event)"
    [timeRangeSelector]="view !== 'tabular'"></app-visualization-menu>
  </div>  
  <!-- LOADING -->
  <div *ngIf="loading" class="center-text h-100 ui-g-12">
      LOADING TAGS OF SELECTION...
      <p-progressSpinner [style]="{width: '30px', height: '30px'}"
                    strokeWidth="8" fill="#EEEEEE" animationDuration="1s"></p-progressSpinner>
  </div>
  <!-- MAIN CONTENT --> 
  <div [hidden]="loading" class="ui-g-12">
    <div class="ui-g">        
      <div *ngIf="loadingTree" class="center-text h-100 ui-g-3 ui-sm-12">
          LOADING TREE...
          <p-progressSpinner [style]="{width: '30px', height: '30px'}"
                        strokeWidth="8" fill="#EEEEEE" animationDuration="1s"></p-progressSpinner>
      </div>
      <div class="ui-g-3 ui-sm-12" *ngIf="treeNodes && !loadingTree">              
        <app-historian-tag-tree [selectedTags]="tags" [treeNodes]="treeNodes"
                (selectTag)="onAddTag($event)" (unselectTag)="onRemoveTag($event)"></app-historian-tag-tree>          
      </div>
      <ng-container *ngIf="currentTagsSelection">
        <div class='ui-g-9' *ngIf="view === 'lineChart'">
          <app-line-chart [tags]="tags" [refreshRate]="autoRefreshInterval.refrashInterval" [timeRange]="timeRange"></app-line-chart>
        </div>
        <div class='ui-g-9' *ngIf="view === 'tabular'">      
          <app-tag-dataview [tags]="tags" [refreshRate]="autoRefreshInterval.refrashInterval"></app-tag-dataview>
        </div>    
      </ng-container>
    </div>
  </div>
</div>
